<%- include('../partials/header') %>

    <section class="member-info">
      <div class="row edit-fields">
      <div class="col s8 center form-payment">
        <form id="stripMyForm" class="form-div" action="/member" method="POST">
            <div class="input-field">
              <select class="icons" name="payee">
                <option value="" disabled selected>Search For Members</option>
                <%if(!!Object.values(mem)) {%>
                <% Object.values(mem).forEach((pix) => {%>
                  <%if(pix._id != user.id) {%>
                <option value="<%=pix._id%>" data-icon="<%=pix.avatar%>"><%=pix.name%></option>
                  <%}%>
                <%})%>
                <%}%>
              </select>
              <input name="payer" data-icon="<%=user.avatar%>" value="<%= user %>" hidden>
            </div>
          <input type="hidden" id="stripeToken" name="stripeToken" />
          <input type="hidden" id="stripeEmail" name="stripeEmail" />
          <input type="hidden" id="amountInCents" name="amountInCents" />
          <div id="payment">

            <input class="strip-input" id="amountInDollars" type="number" placeholder="Enter Amount here" name="paymentAmount" value="10000" min="1000" required>
            <img src="https://img.icons8.com/officel/64/000000/card-in-use.png">
          </div>
        </form>
          <button
          id="customButton"
          type="submit" 
          data-amount="1000"
          value="Pay with Card"
          data-key="pk_test_bxWBtKKtZqxBNXPxKzE8BLU8001CMawzKx"
          data-currency="usd"
          data-name="Funding Group"
          data-description="Stripe Payment for $100.00"
          class="waves-light">SUBMIT</button>
          

      </div>
        
      <%if(user.transaction) {%>

      <table class="highlight">
        <thead>
          <tr>
              <th>#</th>
              <th>Transaction Id</th>
              <th>Member Payed</th>
              <th>Payer</th>
              <th>Amount</th>
          </tr>
        </thead>

        <tbody>
          <%user.transaction.forEach((trans, idx) => {%>
            <tr>
              <td><%=idx+1%></td>
              <td><%=trans._id%></td>
              <td><%=trans.payee%></td>
              <td><%=trans.payer%></td>
              <td><%=trans.paymentAmount%></td>
            </tr>
          <%});%>
        </tbody>
      </table>
      <%} else {%>
        <div class="row">
          <div class="col s12">
            <div>
              <h4 class="center">No Transactions</h4>
            </div>
          </div>
        </div>
        <%}%>
    </section>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>
</body>
</html>